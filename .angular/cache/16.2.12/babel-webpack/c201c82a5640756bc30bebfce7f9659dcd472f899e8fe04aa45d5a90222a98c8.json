{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../service/service/authentication.service\";\nimport * as i3 from \"../../service/token/token.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction LoginComponent_div_4_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const msg_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(msg_r2);\n  }\n}\nfunction LoginComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtemplate(1, LoginComponent_div_4_p_1_Template, 2, 1, \"p\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.errorMsg);\n  }\n}\nexport class LoginComponent {\n  constructor(router, authService, tokenService) {\n    this.router = router;\n    this.authService = authService;\n    this.tokenService = tokenService;\n    this.authRequest = {\n      email: '',\n      password: ''\n    };\n    this.errorMsg = [];\n  }\n  login() {\n    this.errorMsg = [];\n    this.authService.authenticate({\n      body: this.authRequest\n    }).subscribe({\n      next: res => {\n        this.tokenService.token = res.token;\n        this.router.navigate(['books']);\n      },\n      error: err => {\n        console.log(err);\n        if (err.error.validationErrors) {\n          this.errorMsg = err.error.validationErrors;\n        } else {\n          this.errorMsg.push(err.error.errorMsg);\n        }\n      }\n    });\n  }\n  register() {\n    this.router.navigate(['register']);\n  }\n  static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthenticationService), i0.ɵɵdirectiveInject(i3.TokenService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 21,\n    vars: 3,\n    consts: [[1, \"container-fluid\", \"card\", \"login-container\"], [1, \"text-center\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"mb-3\"], [\"for\", \"login\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"login\", \"placeholder\", \"name@example.com\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"password\", \"placeholder\", \"Password\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"d-flex\", \"justify-content-between\", \"mb-3\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"fas\", \"fa-sign-in-alt\"], [\"type\", \"button\", 1, \"btn\", \"btn-link\", 3, \"click\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n        i0.ɵɵtext(2, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"hr\");\n        i0.ɵɵtemplate(4, LoginComponent_div_4_Template, 2, 1, \"div\", 2);\n        i0.ɵɵelementStart(5, \"div\", 3)(6, \"label\", 4);\n        i0.ɵɵtext(7, \"Email address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"input\", 5);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.authRequest.email = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 3)(10, \"label\", 6);\n        i0.ɵɵtext(11, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.authRequest.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"div\", 8)(14, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_14_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵelementStart(15, \"em\", 10);\n        i0.ɵɵtext(16, \"\\u00A0Sign in\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\");\n        i0.ɵɵtext(18, \" Don't have an account?\\u00A0 \");\n        i0.ɵɵelementStart(19, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_19_listener() {\n          return ctx.register();\n        });\n        i0.ɵɵtext(20, \" Register \");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMsg.length);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.authRequest.email);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.authRequest.password);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","msg_r2","ɵɵtemplate","LoginComponent_div_4_p_1_Template","ɵɵproperty","ctx_r0","errorMsg","LoginComponent","constructor","router","authService","tokenService","authRequest","email","password","login","authenticate","body","subscribe","next","res","token","navigate","error","err","console","log","validationErrors","push","register","_","ɵɵdirectiveInject","i1","Router","i2","AuthenticationService","i3","TokenService","_2","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelement","LoginComponent_div_4_Template","ɵɵlistener","LoginComponent_Template_input_ngModelChange_8_listener","$event","LoginComponent_Template_input_ngModelChange_12_listener","LoginComponent_Template_button_click_14_listener","LoginComponent_Template_button_click_19_listener","length"],"sources":["C:\\Users\\Lautaro\\Desktop\\Desarrollo-web\\Proyectos\\book-social-network-frontend\\src\\app\\pages\\login\\login.component.ts","C:\\Users\\Lautaro\\Desktop\\Desarrollo-web\\Proyectos\\book-social-network-frontend\\src\\app\\pages\\login\\login.component.html"],"sourcesContent":["import {Component} from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {AuthenticationService} from '../../service/service/authentication.service';\r\nimport {AuthenticationRequest} from '../../service/model/authentication-request';\r\nimport {TokenService} from '../../service/token/token.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent {\r\n\r\n  authRequest: AuthenticationRequest = {email: '', password: ''};\r\n  errorMsg: Array<string> = [];\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private authService: AuthenticationService,\r\n    private tokenService: TokenService\r\n  ) {\r\n  }\r\n\r\n  login() {\r\n    this.errorMsg = [];\r\n    this.authService.authenticate({\r\n      body: this.authRequest\r\n    }).subscribe({\r\n      next: (res) => {\r\n        this.tokenService.token = res.token as string;\r\n        this.router.navigate(['books']);\r\n      },\r\n      error: (err) => {\r\n        console.log(err);\r\n        if (err.error.validationErrors) {\r\n          this.errorMsg = err.error.validationErrors;\r\n        } else {\r\n          this.errorMsg.push(err.error.errorMsg);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  register() {\r\n    this.router.navigate(['register']);\r\n  }\r\n}","<div class=\"container-fluid card login-container\">\r\n    <h3 class=\"text-center\">Login</h3>\r\n    <hr>\r\n    <div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"errorMsg.length\">\r\n      <p *ngFor=\"let msg of errorMsg\">{{msg}}</p>\r\n    </div>\r\n    <div class=\"mb-3\">\r\n      <label for=\"login\" class=\"form-label\">Email address</label>\r\n      <input [(ngModel)]=\"authRequest.email\"  type=\"email\" class=\"form-control\" id=\"login\" placeholder=\"name@example.com\">\r\n    </div>\r\n    <div class=\"mb-3\">\r\n      <label for=\"password\" class=\"form-label\">Password</label>\r\n      <input [(ngModel)]=\"authRequest.password\" type=\"password\" class=\"form-control\" id=\"password\" placeholder=\"Password\">\r\n    </div>\r\n    <div class=\"d-flex justify-content-between mb-3\">\r\n      <button (click)=\"login()\" type=\"button\" class=\"btn btn-primary\">\r\n        <em class=\"fas fa-sign-in-alt\">&nbsp;Sign in</em>\r\n      </button>\r\n      <div>\r\n        Don't have an account?&nbsp;\r\n        <button (click)=\"register()\" type=\"button\" class=\"btn btn-link\">\r\n          Register\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}